<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PiWorldBank â€” EN+12 (Auto Language)</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <meta name="theme-color" content="#7c3aed"/>
</head>
  <!-- âœ… PWA ì—°ê²° ì„¸íŠ¸ -->
<link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('âœ… Service Worker registered successfully'))
      .catch(err => console.error('âŒ SW registration failed:', err));
    });
  }
</script>
<body>
  <div class="container">
    <header class="header">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="title">PiWorldBank</div>
          <div class="tag" data-i18n="slogan">The web3 digital bank for all humanity</div>
        </div>
      </div>
      <div class="lang">
        <span class="badge">EN+12</span>
        <label for="language" class="tag" data-i18n="language">Language</label>
        <select id="language" aria-label="Language select">
          <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
          <option value="en">English</option>
          <option value="ko">í•œêµ­ì–´</option>
          <option value="zh">ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰</option>
          <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
          <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
          <option value="es">EspaÃ±ol</option>
          <option value="vi">Tiáº¿ng Viá»‡t</option>
          <option value="id">Bahasa Indonesia</option>
          <option value="pt-BR">PortuguÃªs (Brasil)</option>
          <option value="ja">æ—¥æœ¬èª</option>
          <option value="de">Deutsch</option>
          <option value="fr">FranÃ§ais</option>
        </select>
      </div>
    </header>

    <div class="cta">
      <button id="installBtn" data-i18n="install">Install PWA</button>
      <button id="demoBtn" data-i18n="oneTouch">One-Touch Demo</button>
    </div>

    <section class="grid" aria-label="Main actions">
      <div class="card">
        <h3 data-i18n="ubi">UBI</h3>
        <p data-i18n="ubi_desc">Basic income rewards for pioneers</p>
      </div>
      <div class="card">
        <h3 data-i18n="pay">Remit / Pay</h3>
        <p data-i18n="pay_desc">Pi transfers & payments</p>
      </div>
      <div class="card">
        <h3 data-i18n="stake">Staking (31.4% APY)</h3>
        <p data-i18n="stake_desc">Deposit / Earn with Pi</p>
      </div>
      <div class="card">
        <h3 data-i18n="reward">Rewards</h3>
        <p data-i18n="reward_desc">Daily tasks & bonuses</p>
      </div>
      <div class="card">
        <h3 data-i18n="support">Customer Center</h3>
        <p data-i18n="support_desc">Auto-translate Q&A</p>
        <p class="note" data-i18n="gcv_inline">One GCV for all nations â€” Global Pi value reference</p>
      </div>
    </section>

    <hr/>

    <section>
      <div class="card">
        <h3 data-i18n="media_title">YouTube & TikTok</h3>
        <p data-i18n="media_desc">Dubbing/Subtitles supported for 13 languages.</p>
      </div>
    </section>

    <footer class="footer">
      <div class="tag"><span class="powered" data-i18n="powered_by">Powered by PiWorldBank</span> â€¢ By Hyekong (ljw2358)</div>
      <a class="link" href="#" id="qrLink" data-i18n="qr_text">Show Install QR (placeholder)</a>
    </footer>
  </div>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PiWorldBank 2025</title>
<meta name="theme-color" content="#3a0072">
<meta name="description" content="The Web3 Digital Bank for All Humanity">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="assets/img/logo.png">
<style>
:root{
  --bg1:#000; --bg2:#3a0072; --text:#fff; --muted:#b5b5c9;
  --accent:#9b5cff; --accent2:#ffda7a; --glass:rgba(255,255,255,.08);
  --border:rgba(255,255,255,.17); --radius:14px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:system-ui,Inter,"Noto Sans KR","Apple SD Gothic Neo",Ubuntu,Arial,sans-serif;
  color:var(--text);
  background:radial-gradient(1200px 700px at 50% 10%,var(--bg2),var(--bg1));
  display:flex;flex-direction:column;min-height:100vh;background-attachment:fixed;
}
header{
  display:flex;align-items:center;justify-content:space-between;gap:14px;flex-wrap:wrap;
  padding:16px 5vw;background:var(--glass);backdrop-filter:blur(14px);border-bottom:1px solid var(--border)
}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.brand img{width:42px;height:42px;border-radius:12px}
.slogan{font-size:clamp(18px,2.2vw,20px);opacity:.92}
.right{display:flex;flex-direction:column;align-items:flex-end;gap:8px}
.btn{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#000;border:0;border-radius:12px;padding:8px 12px;font-weight:800;cursor:pointer}
.lang{display:flex;flex-wrap:wrap;gap:6px;justify-content:flex-end}
.lang button{background:#ffffff14;color:#fff;border:1px solid var(--border);font-size:12px;padding:4px 8px;border-radius:8px}
.lang button.active{background:var(--accent2);color:#000;font-weight:800}
.hero{text-align:center;padding:42px 16px}
.hero h1{font-size:clamp(26px,3.6vw,38px);margin-bottom:8px}
.hero p{opacity:.9}
.grid{width:100%;max-width:1100px;margin:12px auto 24px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;padding:0 16px}
.card{background:var(--glass);border:1px solid var(--border);border-radius:var(--radius);padding:18px;text-align:center;transition:.2s}
.card:hover{transform:translateY(-6px);box-shadow:0 10px 30px rgba(0,0,0,.25)}
.card b{display:block;color:var(--accent2);margin-bottom:6px}
.section{max-width:1000px;margin:24px auto;padding:16px;border:1px solid var(--border);border-radius:var(--radius);background:var(--glass)}
.section h2{text-align:center;margin-bottom:10px;color:var(--accent2)}
.videoWrap iframe{width:100%;min-height:360px;border:0;border-radius:12px}
.controls{display:flex;gap:8px;justify-content:center;margin:8px 0}
.footer{margin-top:auto;text-align:center;color:var(--muted);padding:18px;border-top:1px solid var(--border)}
.footer a{color:var(--accent2);text-decoration:none;margin:0 6px}
#chatBox{max-height:320px;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
.msg{padding:8px 12px;border-radius:12px;max-width:78%;word-wrap:break-word}
.msg.user{align-self:flex-end;background:#ffffff14}
.msg.admin{align-self:flex-start;background:#ffffff29}
.chatRow{display:flex;gap:8px;margin-top:8px}
.chatRow input{flex:1;padding:10px;border-radius:10px;border:1px solid var(--border);background:#00000033;color:#fff}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#ffffff1a;border:1px solid var(--border);font-size:12px;margin-left:8px}
.rtl{direction:rtl}
@media (max-width:640px){.videoWrap iframe{min-height:220px}}
</style>
</head>
<body>
  <header>
    <div class="brand">
      <img src="assets/img/logo.png" alt="PiWorldBank">
      <span>PiWorldBank</span>
      <span id="badgeOffline" class="badge" style="display:none">OFFLINE</span>
    </div>
    <div class="slogan" id="slogan">The Web3 Digital Bank for All Humanity</div>
    <div class="right">
      <div class="loginRow"><button id="loginBtn" class="btn">Login / QR</button></div>
      <nav id="langBar" class="lang"></nav>
    </div>
  </header>

  <section class="hero">
    <h1 id="headline">One GCV for All Nations</h1>
    <p id="sub">UBI Â· Payments Â· Savings Â· Rewards Â· Support</p>
  </section>

  <main class="grid">
    <article class="card"><b id="m1">UBI</b><span id="m1d">Universal Basic Income pilot</span><button class="btn">Open</button></article>
    <article class="card"><b id="m2">Payments</b><span id="m2d">Send & receive Pi instantly</span><button class="btn">Open</button></article>
    <article class="card"><b id="m3">Savings</b><span id="m3d">Stake & earn (demo)</span><button class="btn">Open</button></article>
    <article class="card"><b id="m4">Rewards</b><span id="m4d">Daily missions & bonuses</span><button class="btn">Open</button></article>
    <article class="card"><b id="m5">Support</b><span id="m5d">Help center & contacts</span><button class="btn">Open</button></article>
    <article class="card"><b id="m6">Login / QR</b><span id="m6d">Pi SDK slot (demo)</span><button class="btn">Open</button></article>
  </main>

  <!-- VIDEO SECTION -->
  <section class="section" id="videoSec">
    <h2>ğŸ¬ YouTube / TikTok</h2>
    <div class="controls">
      <button class="btn" id="playIntro">Play Offline Intro</button>
      <button class="btn" id="openYT">Open YouTube</button>
      <button class="btn" id="openTT">Open TikTok</button>
    </div>
    <div class="videoWrap">
      <!-- ì˜¤í”„ë¼ì¸ìš© intro ë¹„ë””ì˜¤ (assets/video/intro.mp4) -->
      <video id="introVideo" controls preload="metadata" style="width:100%;border-radius:12px">
        <source src="assets/video/intro.mp4" type="video/mp4">
        <!-- ìë§‰(13ê°œ ì–¸ì–´ vttë¥¼ /subs ì— ë‘ë©´ ìë™ ë¡œë”©) -->
      </video>
    </div>
  </section>

  <!-- SUPPORT SECTION -->
  <section class="section" id="support">
    <h2>ğŸ’¬ Customer Center</h2>
    <div id="chatBox">
      <div class="msg admin" id="helloMsg">ì•ˆë…•í•˜ì„¸ìš”. PiWorldBank ê³ ê°ì„¼í„°ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
    </div>
    <div class="chatRow">
      <input id="chatInput" placeholder="Type messageâ€¦">
      <button class="btn" id="sendBtn">Send</button>
      <button class="btn" id="speakBtn">ğŸ”Š</button>
    </div>
  </section>

  <footer class="footer">
    <div id="foot">Powered by PiWorldBank Â· 2025</div>
    <div class="links" style="margin-top:6px">
      <a href="https://youtube.com/@hyekong" target="_blank">â–¶ YouTube</a> Â·
      <a href="https://tiktok.com/@hyekong" target="_blank">ğŸµ TikTok</a>
    </div>
  </footer>

<script>
/* ---------------------------
   0) CONFIG
---------------------------- */
const LANG_ORDER = ["uk","en","ko","zh","ar","hi","vi","id","pt-BR","es","fr","ja","de"];
const I18N_KEYS = ["slogan","headline","sub","m1","m1d","m2","m2d","m3","m3d","m4","m4d","m5","m5d","m6","m6d","foot"];
const SUBS = { // ìë§‰ íŒŒì¼ëª…ì´ ìˆìœ¼ë©´ introVideoì— track ì¶”ê°€
  "uk":"subs/uk.vtt","en":"subs/en.vtt","ko":"subs/ko.vtt","zh":"subs/zh.vtt","ar":"subs/ar.vtt",
  "hi":"subs/hi.vtt","vi":"subs/vi.vtt","id":"subs/id.vtt","pt-BR":"subs/pt-BR.vtt","es":"subs/es.vtt",
  "fr":"subs/fr.vtt","ja":"subs/ja.vtt","de":"subs/de.vtt"
};
const L = {
  en:{slogan:"The Web3 Digital Bank for All Humanity",headline:"One GCV for All Nations",sub:"UBI Â· Payments Â· Savings Â· Rewards Â· Support",
      m1:"UBI",m1d:"Universal Basic Income pilot",
      m2:"Payments",m2d:"Send & receive Pi instantly",
      m3:"Savings",m3d:"Stake & earn (demo)",
      m4:"Rewards",m4d:"Daily missions & bonuses",
      m5:"Support",m5d:"Help center & contacts",
      m6:"Login / QR",m6d:"Pi SDK slot (demo)",
      foot:"Powered by PiWorldBank Â· 2025"},
  ko:{slogan:"ì¸ë¥˜ ëª¨ë‘ë¥¼ ìœ„í•œ Web3 ë””ì§€í„¸ ì€í–‰",headline:"ëª¨ë“  ë‚˜ë¼ë¥¼ ìœ„í•œ One GCV",sub:"UBI Â· ì†¡ê¸ˆ/ê²°ì œ Â· ì˜ˆì¹˜ Â· ë¦¬ì›Œë“œ Â· ê³ ê°ì„¼í„°",
      m1:"UBI",m1d:"ê¸°ë³¸ì†Œë“ íŒŒì¼ëŸ¿",m2:"ì†¡ê¸ˆ/ê²°ì œ",m2d:"Pi ì¦‰ì‹œ ì†¡ìˆ˜ì‹ ",m3:"ì˜ˆì¹˜",m3d:"ìŠ¤í…Œì´í‚¹ ìˆ˜ìµ (ë°ëª¨)",
      m4:"ë¦¬ì›Œë“œ",m4d:"ë°ì¼ë¦¬ ë¯¸ì…˜ & ë³´ë„ˆìŠ¤",m5:"ê³ ê°ì„¼í„°",m5d:"ë„ì›€ë§ ë° ì—°ë½ì²˜",m6:"ë¡œê·¸ì¸/QR",m6d:"Pi SDK ìë¦¬ (ë°ëª¨)",
      foot:"Powered by PiWorldBank Â· 2025"},
  uk:{slogan:"Ğ’ĞµĞ±3 Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¸Ğ¹ Ğ±Ğ°Ğ½Ğº Ğ´Ğ»Ñ Ğ²ÑÑŒĞ¾Ğ³Ğ¾ Ğ»ÑĞ´ÑÑ‚Ğ²Ğ°",headline:"ĞĞ´Ğ¸Ğ½ GCV Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… Ğ½Ğ°Ñ†Ñ–Ğ¹",sub:"UBI Â· ĞŸĞ»Ğ°Ñ‚ĞµĞ¶Ñ– Â· Ğ—Ğ°Ğ¾Ñ‰Ğ°Ğ´Ğ¶ĞµĞ½Ğ½Ñ Â· Ğ’Ğ¸Ğ½Ğ°Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¸ Â· ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°",
      m1:"UBI",m1d:"ĞŸÑ–Ğ»Ğ¾Ñ‚ Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñƒ",m2:"ĞŸĞ»Ğ°Ñ‚ĞµĞ¶Ñ–",m2d:"ĞœĞ¸Ñ‚Ñ‚Ñ”Ğ²Ñ– Ğ¿ĞµÑ€ĞµĞºĞ°Ğ·Ğ¸ Pi",m3:"Ğ—Ğ°Ğ¾Ñ‰Ğ°Ğ´Ğ¶ĞµĞ½Ğ½Ñ",m3d:"Ğ¡Ñ‚ĞµĞ¹ĞºÑ–Ğ½Ğ³ (Ğ´ĞµĞ¼Ğ¾)",
      m4:"Ğ’Ğ¸Ğ½Ğ°Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¸",m4d:"Ğ©Ğ¾Ğ´ĞµĞ½Ğ½Ñ– Ğ·Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ",m5:"ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ°",m5d:"Ğ”Ğ¾Ğ²Ñ–Ğ´ĞºĞ° Ñ‚Ğ° ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¸",m6:"Ğ’Ñ…Ñ–Ğ´ / QR",m6d:"Ğ¡Ğ»Ğ¾Ñ‚ Pi SDK (Ğ´ĞµĞ¼Ğ¾)",
      foot:"ĞŸÑ€Ğ°Ñ†ÑÑ” Ğ½Ğ° PiWorldBank Â· 2025"},
  zh:{slogan:"ä¸ºå…¨äººç±»è€Œè®¾çš„ Web3 æ•°å­—é“¶è¡Œ",headline:"é¢å‘æ‰€æœ‰å›½å®¶çš„ One GCV",sub:"UBI Â· æ”¯ä»˜ Â· å‚¨è“„ Â· å¥–åŠ± Â· å®¢æœ",
      m1:"UBI",m1d:"åŸºæœ¬æ”¶å…¥è¯•ç‚¹",m2:"æ”¯ä»˜",m2d:"Pi å³æ—¶æ”¶å‘",m3:"å‚¨è“„",m3d:"è´¨æŠ¼æ”¶ç›Šï¼ˆæ¼”ç¤ºï¼‰",
      m4:"å¥–åŠ±",m4d:"æ¯æ—¥ä»»åŠ¡ä¸å¥–é‡‘",m5:"å®¢æœ",m5d:"å¸®åŠ©ä¸­å¿ƒä¸è”ç³»æ–¹å¼",m6:"ç™»å½•/äºŒç»´ç ",m6d:"Pi SDK æ’æ§½ï¼ˆæ¼”ç¤ºï¼‰",
      foot:"Powered by PiWorldBank Â· 2025"},
  ar:{slogan:"Ø¨Ù†Ùƒ Ø±Ù‚Ù…ÙŠ Web3 Ù„Ù„Ø¨Ø´Ø±ÙŠØ© Ø¬Ù…Ø¹Ø§Ø¡",headline:"Ø¹Ù…Ù„Ø© GCV ÙˆØ§Ø­Ø¯Ø© Ù„ÙƒÙ„ Ø§Ù„Ø£Ù…Ù…",sub:"Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Â· Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Â· Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Â· Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Â· Ø§Ù„Ø¯Ø¹Ù…",
      m1:"Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ",m1d:"Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªØ¬Ø±ÙŠØ¨ÙŠ",m2:"Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª",m2d:"Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§Ø³ØªÙ‚Ø¨Ø§Ù„ Pi ÙÙˆØ±Ù‹Ø§",
      m3:"Ø§Ù„Ø§Ø¯Ø®Ø§Ø±",m3d:"Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø±Ù‡Ù† (ØªØ¬Ø±ÙŠØ¨ÙŠ)",m4:"Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª",m4d:"Ù…Ù‡Ø§Ù… ÙŠÙˆÙ…ÙŠØ© ÙˆÙ…ÙƒØ§ÙØ¢Øª",
      m5:"Ø§Ù„Ø¯Ø¹Ù…",m5d:"Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆØ§Ù„ØªÙˆØ§ØµÙ„",m6:"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / QR",m6d:"ÙØªØ­Ø© Pi SDK (ØªØ¬Ø±ÙŠØ¨ÙŠ)",
      foot:"Ù…Ø¯Ø¹ÙˆÙ… Ù…Ù† PiWorldBank Â· 2025"},
  hi:{slogan:"à¤¸à¤®à¥‚à¤šà¥€ à¤®à¤¾à¤¨à¤µà¤¤à¤¾ à¤•à¥‡ à¤²à¤¿à¤ Web3 à¤¡à¤¿à¤œà¤¿à¤Ÿà¤² à¤¬à¥ˆà¤‚à¤•",headline:"à¤¸à¤­à¥€ à¤¦à¥‡à¤¶à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤ à¤à¤• GCV",sub:"UBI Â· à¤­à¥à¤—à¤¤à¤¾à¤¨ Â· à¤¬à¤šà¤¤ Â· à¤°à¤¿à¤µà¥‰à¤°à¥à¤¡ Â· à¤¸à¤ªà¥‹à¤°à¥à¤Ÿ",
      m1:"UBI",m1d:"à¤®à¥‚à¤² à¤†à¤¯ à¤ªà¤¾à¤¯à¤²à¤Ÿ",m2:"à¤­à¥à¤—à¤¤à¤¾à¤¨",m2d:"Pi à¤¤à¥à¤µà¤°à¤¿à¤¤ à¤­à¥‡à¤œà¥‡à¤‚/à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¥‡à¤‚",m3:"à¤¬à¤šà¤¤",m3d:"à¤¸à¥à¤Ÿà¥‡à¤• à¤†à¤¯ (à¤¡à¥‡à¤®à¥‹)",
      m4:"à¤°à¤¿à¤µà¥‰à¤°à¥à¤¡",m4d:"à¤¦à¥ˆà¤¨à¤¿à¤• à¤®à¤¿à¤¶à¤¨ à¤µ à¤¬à¥‹à¤¨à¤¸",m5:"à¤¸à¤ªà¥‹à¤°à¥à¤Ÿ",m5d:"à¤¹à¥‡à¤²à¥à¤ª à¤¸à¥‡à¤‚à¤Ÿà¤° à¤µ à¤•à¥‰à¤¨à¥à¤Ÿà¥ˆà¤•à¥à¤Ÿ",m6:"à¤²à¥‰à¤—à¤¿à¤¨ / QR",m6d:"Pi SDK à¤¸à¥à¤²à¥‰à¤Ÿ (à¤¡à¥‡à¤®à¥‹)",
      foot:"Powered by PiWorldBank Â· 2025"},
  vi:{slogan:"NgÃ¢n hÃ ng sá»‘ Web3 cho toÃ n nhÃ¢n loáº¡i",headline:"Má»™t GCV cho má»i quá»‘c gia",sub:"UBI Â· Thanh toÃ¡n Â· Tiáº¿t kiá»‡m Â· Pháº§n thÆ°á»Ÿng Â· Há»— trá»£",
      m1:"UBI",m1d:"Thá»­ nghiá»‡m thu nháº­p cÆ¡ báº£n",m2:"Thanh toÃ¡n",m2d:"Gá»­i/nháº­n Pi tá»©c thÃ¬",m3:"Tiáº¿t kiá»‡m",m3d:"Staking (demo)",
      m4:"Pháº§n thÆ°á»Ÿng",m4d:"Nhiá»‡m vá»¥ háº±ng ngÃ y",m5:"Há»— trá»£",m5d:"Trung tÃ¢m trá»£ giÃºp",m6:"ÄÄƒng nháº­p / QR",m6d:"Khe Pi SDK (demo)",
      foot:"Powered by PiWorldBank Â· 2025"},
  id:{slogan:"Bank digital Web3 untuk seluruh umat manusia",headline:"Satu GCV untuk semua negara",sub:"UBI Â· Pembayaran Â· Tabungan Â· Hadiah Â· Dukungan",
      m1:"UBI",m1d:"Uji coba pendapatan dasar",m2:"Pembayaran",m2d:"Kirim & terima Pi instan",m3:"Tabungan",m3d:"Staking (demo)",
      m4:"Hadiah",m4d:"Misi harian & bonus",m5:"Dukungan",m5d:"Pusat bantuan & kontak",m6:"Masuk / QR",m6d:"Slot Pi SDK (demo)",
      foot:"Powered by PiWorldBank Â· 2025"},
  "pt-BR":{slogan:"Banco digital Web3 para toda a humanidade",headline:"Um GCV para todas as naÃ§Ãµes",sub:"UBI Â· Pagamentos Â· PoupanÃ§a Â· Recompensas Â· Suporte",
      m1:"UBI",m1d:"Piloto de renda bÃ¡sica",m2:"Pagamentos",m2d:"Envie e receba Pi instantaneamente",m3:"PoupanÃ§a",m3d:"Staking (demo)",
      m4:"Recompensas",m4d:"MissÃµes diÃ¡rias e bÃ´nus",m5:"Suporte",m5d:"Central de ajuda e contatos",m6:"Login / QR",m6d:"Slot Pi SDK (demo)",
      foot:"Powered by PiWorldBank Â· 2025"},
  es:{slogan:"Banco digital Web3 para toda la humanidad",headline:"Un GCV para todas las naciones",sub:"UBI Â· Pagos Â· Ahorros Â· Recompensas Â· Soporte",
      m1:"UBI",m1d:"Piloto de ingreso bÃ¡sico",m2:"Pagos",m2d:"Enviar y recibir Pi al instante",m3:"Ahorros",m3d:"Staking (demo)",
      m4:"Recompensas",m4d:"Misiones diarias",m5:"Soporte",m5d:"Centro de ayuda",m6:"Iniciar sesiÃ³n / QR",m6d:"Slot Pi SDK (demo)",
      foot:"Powered by PiWorldBank Â· 2025"},
  fr:{slogan:"Banque numÃ©rique Web3 pour toute l'humanitÃ©",headline:"Un GCV pour toutes les nations",sub:"UBI Â· Paiements Â· Ã‰pargne Â· RÃ©compenses Â· Support",
      m1:"UBI",m1d:"Pilote de revenu de base",m2:"Paiements",m2d:"Envoyer & recevoir du Pi",m3:"Ã‰pargne",m3d:"Staking (dÃ©mo)",
      m4:"RÃ©compenses",m4d:"Missions quotidiennes",m5:"Support",m5d:"Centre d'aide",m6:"Connexion / QR",m6d:"Emplacement Pi SDK (dÃ©mo)",
      foot:"Powered by PiWorldBank Â· 2025"},
  ja:{slogan:"ã™ã¹ã¦ã®äººã®ãŸã‚ã® Web3 ãƒ‡ã‚¸ã‚¿ãƒ«éŠ€è¡Œ",headline:"ã™ã¹ã¦ã®å›½ã®ãŸã‚ã® One GCV",sub:"UBIãƒ»æ±ºæ¸ˆãƒ»è²¯è“„ãƒ»ãƒªãƒ¯ãƒ¼ãƒ‰ãƒ»ã‚µãƒãƒ¼ãƒˆ",
      m1:"UBI",m1d:"ãƒ™ãƒ¼ã‚·ãƒƒã‚¯ã‚¤ãƒ³ã‚«ãƒ ã®å®Ÿè¨¼",m2:"æ±ºæ¸ˆ",m2d:"Pi ã‚’å³æ™‚é€å—ä¿¡",m3:"è²¯è“„",m3d:"ã‚¹ãƒ†ãƒ¼ã‚­ãƒ³ã‚°ï¼ˆãƒ‡ãƒ¢ï¼‰",
      m4:"ãƒªãƒ¯ãƒ¼ãƒ‰",m4d:"ãƒ‡ã‚¤ãƒªãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³",m5:"ã‚µãƒãƒ¼ãƒˆ",m5d:"ãƒ˜ãƒ«ãƒ—ã‚»ãƒ³ã‚¿ãƒ¼",m6:"ãƒ­ã‚°ã‚¤ãƒ³ / QR",m6d:"Pi SDK ã‚¹ãƒ­ãƒƒãƒˆï¼ˆãƒ‡ãƒ¢ï¼‰",
      foot:"Powered by PiWorldBank Â· 2025"},
  de:{slogan:"Web3-Digitale Bank fÃ¼r die gesamte Menschheit",headline:"Ein GCV fÃ¼r alle Nationen",sub:"UBI Â· Zahlungen Â· Sparen Â· PrÃ¤mien Â· Support",
      m1:"UBI",m1d:"Pilot fÃ¼r Grundeinkommen",m2:"Zahlungen",m2d:"Pi sofort senden & empfangen",m3:"Sparen",m3d:"Staking (Demo)",
      m4:"PrÃ¤mien",m4d:"TÃ¤gliche Missionen",m5:"Support",m5d:"Hilfe & Kontakt",m6:"Login / QR",m6d:"Pi SDK Slot (Demo)",
      foot:"Powered by PiWorldBank Â· 2025"}
};

// 1) ì–¸ì–´ë°” ìƒì„±
const langBar = document.getElementById('langBar');
langBar.innerHTML = LANG_ORDER.map(c=>`<button data-lang="${c}">${c.toUpperCase()}</button>`).join('');

// 2) ì ìš© í•¨ìˆ˜
function applyLang(code){
  const t = L[code] || L.en;
  slogan.textContent=t.slogan; headline.textContent=t.headline; sub.textContent=t.sub;
  ["m1","m2","m3","m4","m5","m6"].forEach(k=>{
    document.getElementById(k).textContent=t[k];
    document.getElementById(k+"d").textContent=t[k+"d"];
  });
  foot.textContent=t.foot;
  document.documentElement.lang = code;
  document.documentElement.dir = (code==="ar")?"rtl":"ltr";
  [...langBar.querySelectorAll('button')].forEach(b=>b.classList.toggle('active', b.dataset.lang===code));
  // ìë§‰ track êµì²´
  for(const tr of [...introVideo.querySelectorAll('track')]) tr.remove();
  if(SUBS[code]){
    const tr=document.createElement('track'); tr.kind="subtitles";
    tr.srclang=code; tr.src=SUBS[code]; tr.default=true; introVideo.appendChild(tr);
  }
  localStorage.setItem('pwb_lang', code);
}

// 3) ì–¸ì–´ ê°ì§€ & ì´ˆê¸°í™”
function detect(){
  const saved = localStorage.getItem('pwb_lang'); if(saved) return saved;
  const nav = navigator.languages || [navigator.language];
  for(const l of nav){ const s=(l||'').toLowerCase().split('-')[0]; if(LANG_ORDER.includes(s)) return s; }
  return "en";
}
applyLang(detect());

// 4) ì´ë²¤íŠ¸
langBar.addEventListener('click',e=>{
  if(e.target.matches('button[data-lang]')) applyLang(e.target.dataset.lang);
});
document.getElementById('loginBtn').addEventListener('click',()=>alert("Login / QR demo slot"));

// 5) ë¹„ë””ì˜¤ ì»¨íŠ¸ë¡¤
document.getElementById('playIntro').onclick=()=>introVideo.play();
document.getElementById('openYT').onclick=()=>window.open('https://youtube.com/@hyekong','_blank');
document.getElementById('openTT').onclick=()=>window.open('https://tiktok.com/@hyekong','_blank');

// 6) ê³ ê°ì„¼í„° â€” ìë™ ë²ˆì—­(ì˜¨ë¼ì¸: êµ¬ê¸€, ì˜¤í”„ë¼ì¸: phrasebook)
const phrasebook = {
  "ko":{"hello":"ì•ˆë…•í•˜ì„¸ìš”","thanks":"ê°ì‚¬í•©ë‹ˆë‹¤","help":"ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?"},
  "uk":{"ì•ˆë…•í•˜ì„¸ìš”":"ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚!","ê°ì‚¬í•©ë‹ˆë‹¤":"Ğ”ÑĞºÑƒÑ!","ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?":"Ğ§Ğ¸Ğ¼ Ğ¼Ğ¾Ğ¶ĞµĞ¼Ğ¾ Ğ´Ğ¾Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ñ‚Ğ¸?"}
};
function phrasebookTranslate(text, from, to){
  if(phrasebook[from] && phrasebook[to] && phrasebook[to][text]) return phrasebook[to][text];
  // ì—­ë°©í–¥ í‚¤ë„ ì§€ì›(ê°„ë‹¨ë§¤í•‘)
  for(const [k,v] of Object.entries(phrasebook[from]||{})){ if(k===text) return phrasebook[to]?.[k]||text; if(v===text) return phrasebook[to]?.[k]||text; }
  return text;
}
async function onlineTranslate(text, from, to){
  const url=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${from}&tl=${to}&dt=t&q=${encodeURIComponent(text)}`;
  const r=await fetch(url); const j=await r.json(); return j[0].map(x=>x[0]).join('');
}
async function smartTranslate(text, from, to){
  try{
    if(navigator.onLine){ return await onlineTranslate(text, from, to); }
  }catch(e){}
  return phrasebookTranslate(text, from, to);
}
function detectUserLang(){
  const htmlLang=document.documentElement.lang||"en";
  // ì–¸ì–´ì½”ë“œ í†µì¼
  return htmlLang;
}
function renderChat({from,text}){
  const div=document.createElement('div'); div.className='msg '+from; div.textContent=text; chatBox.appendChild(div); chatBox.scrollTop=chatBox.scrollHeight;
}
document.getElementById('sendBtn').addEventListener('click', async ()=>{
  const raw=chatInput.value.trim(); if(!raw) return; chatInput.value="";
  const userLang=detectUserLang(); renderChat({from:'user',text:raw});
  // 1) ì‚¬ìš©ì â†’ í•œêµ­ì–´
  const toKo = await smartTranslate(raw, userLang, "ko");
  // 2) ìƒë‹´ì‚¬ ë”ë¯¸ ì‘ë‹µ(í•œêµ­ì–´)
  const replyKo = replyEngine(toKo);
  // 3) í•œêµ­ì–´ â†’ ì‚¬ìš©ì ì–¸ì–´
  const back = await smartTranslate(replyKo, "ko", userLang);
  renderChat({from:'admin',text:back});
});
function replyEngine(koText){
  const lower = koText.toLowerCase();
  if(lower.includes("ì•ˆë…•")||lower.includes("hello")) return "ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?";
  if(lower.includes("ubi")) return "UBIëŠ” ë‹¨ê³„ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì¤‘ì…ë‹ˆë‹¤. ì§€ê°‘ì„ ì—°ê²°í•´ ì£¼ì„¸ìš”.";
  if(lower.includes("ê²°ì œ")||lower.includes("payment")) return "ê²°ì œëŠ” Pi ì§€ê°‘ ì—°ê²° í›„ ì¦‰ì‹œ ì†¡ê¸ˆì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.";
  return "ìš”ì²­ì„ ì ‘ìˆ˜í–ˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì‚¬í•­ì€ ê³§ ì•ˆë‚´ë“œë¦´ê²Œìš”.";
}
// TTS
document.getElementById('speakBtn').onclick=()=>{
  const msgs=[...document.querySelectorAll('#chatBox .msg.admin')]; if(!msgs.length) return;
  const last=msgs[msgs.length-1].textContent; const u=new SpeechSynthesisUtterance(last);
  const lang=document.documentElement.lang||"en"; u.lang=(lang==="pt-BR")?"pt-BR":lang; speechSynthesis.speak(u);
};

// 7) RTL í† ê¸€(ì•„ëì–´)
function syncDir(){ document.body.classList.toggle('rtl', document.documentElement.dir==='rtl'); }
const dirObs=new MutationObserver(syncDir); dirObs.observe(document.documentElement,{attributes:true,attributeFilter:['dir']}); syncDir();

// 8) PWA / ì˜¤í”„ë¼ì¸ í‘œì‹œ
if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js'); }
function updateOfflineBadge(){ document.getElementById('badgeOffline').style.display = navigator.onLine? 'none':'inline-block'; }
window.addEventListener('online', updateOfflineBadge); window.addEventListener('offline', updateOfflineBadge); updateOfflineBadge();

// 9) í•„ìˆ˜ í‚¤ ëˆ„ë½ ì ê²€(ê°œë°œìš©)
(function validate(){
  const missing=[]; for(const c of LANG_ORDER){ const pack=L[c]; if(!pack){missing.push(`${c}:<pack missing>`); continue;}
    for(const k of I18N_KEYS){ if(!(k in pack)) missing.push(`${c}.${k}`); }
  }
  if(missing.length) console.warn("[i18n missing]", missing); else console.info("[i18n] 13 locales OK");
})();
</script>
</body>
</html>



