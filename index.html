<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#5b2aa7" />
  <title>PiWorldBank</title>

  <!-- PWA (설치) -->
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./favicon.ico">

  <style>
    :root{
      --bg:#0b0c13;
      --card:#14162a;
      --card2:#101225;
      --border:rgba(255,255,255,.12);
      --text:#eef1ff;
      --muted:rgba(238,241,255,.72);
      --accent:#f5c542;
      --accent2:#7c4dff;
      --shadow: 0 14px 40px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Noto Sans KR", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 600px at 20% 0%, rgba(124,77,255,.25), transparent 55%),
                  radial-gradient(1000px 520px at 80% 10%, rgba(245,197,66,.18), transparent 55%),
                  var(--bg);
    }
    .wrap{max-width:980px;margin:0 auto;padding:18px 14px 44px}
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      gap:10px;margin-bottom:14px
    }
    .lang{
      display:flex;align-items:center;gap:8px;
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      padding:10px 12px;border-radius:999px;
      box-shadow: var(--shadow);
    }
    select{
      background:transparent;color:var(--text);
      border:none;outline:none;font-weight:700;
      cursor:pointer;
    }
    option{color:#000}
    .hero{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius:24px;
      box-shadow: var(--shadow);
      padding:18px 16px;
    }
    .brand{
      display:flex;flex-direction:column;align-items:center;text-align:center;gap:10px;
      padding:10px 0 4px;
    }
    .logo{
      width:64px;height:64px;border-radius:18px;
      display:grid;place-items:center;
      background: linear-gradient(135deg, #7c4dff, #f5c542);
      font-weight:900;font-size:30px;
      box-shadow: 0 12px 26px rgba(124,77,255,.25);
    }
    h1{margin:0;font-size:30px;letter-spacing:.2px}
    .tag{margin:0;color:var(--muted);font-weight:700}
    .motto{margin:0;color:var(--accent);font-weight:900}
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      margin-top:14px;
    }
    @media (max-width:760px){
      .grid{grid-template-columns: repeat(2,1fr)}
      h1{font-size:26px}
    }
    .card{
      background:rgba(255,255,255,.04);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px 12px;
      cursor:pointer;
      transition:.15s transform ease, .15s background ease;
      user-select:none;
    }
    .card:hover{transform: translateY(-2px); background:rgba(255,255,255,.06)}
    .card b{display:block;margin-bottom:6px}
    .card span{color:var(--muted);font-weight:700;font-size:13px;line-height:1.25}
    .section{
      margin-top:14px;
      background:rgba(255,255,255,.04);
      border:1px solid var(--border);
      border-radius:24px;
      padding:14px 14px;
    }
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .btn{
      border:none;border-radius:999px;
      padding:12px 14px;
      font-weight:900;
      cursor:pointer;
      background:linear-gradient(135deg, var(--accent), #ffdf7a);
      color:#1b1400;
      box-shadow: 0 12px 24px rgba(245,197,66,.18);
    }
    .btn2{
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      color:var(--text);
      border-radius:999px;
      padding:10px 12px;
      font-weight:800;
      cursor:pointer;
    }
    .small{color:var(--muted);font-weight:700;font-size:12px}
    a.link{color:var(--text);text-decoration:none;font-weight:900}
    a.link:hover{text-decoration:underline}
    .footer{
      margin-top:14px;
      display:flex;gap:10px;flex-wrap:wrap;
      justify-content:space-between;align-items:center;
    }
    .pill{
      padding:10px 12px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      font-weight:800;
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:rgba(20,22,42,.95);
      border:1px solid var(--border);
      padding:10px 12px;border-radius:999px;
      color:var(--text);font-weight:800;
      display:none;gap:10px;align-items:center;
      box-shadow: var(--shadow);
      max-width: calc(100% - 24px);
    }
    .toast.show{display:flex}
  </style>
</head>

<body>
<div class="wrap">
  <div class="topbar">
    <div class="pill mono">PiWorldBank</div>

    <div class="lang">
      <span class="small" id="langLabel">언어</span>
      <select id="langSelect" aria-label="Language">
        <option value="ko" selected>한국어</option>
        <option value="en">English</option>
      </select>
    </div>
  </div>

  <div class="hero">
    <div class="brand">
      <div class="logo">π</div>
      <h1 id="title">PiWorldBank</h1>
      <p class="tag" id="tag">ONE WORLD · ONE PI · ONE FUTURE</p>
      <p class="motto" id="motto">People, not profit</p>
    </div>

    <div class="grid">
      <div class="card" data-action="ubi">
        <b id="c1t">UBI</b>
        <span id="c1s">기본소득 · 리워드</span>
      </div>
      <div class="card" data-action="pay">
        <b id="c2t">Payments</b>
        <span id="c2s">결제 · 송금</span>
      </div>
      <div class="card" data-action="stake">
        <b id="c3t">Staking</b>
        <span id="c3s">31.4% APY (demo)</span>
      </div>
      <div class="card" data-action="reward">
        <b id="c4t">Rewards</b>
        <span id="c4s">참여 리워드</span>
      </div>
      <div class="card" data-action="support">
        <b id="c5t">Support</b>
        <span id="c5s">헬프센터</span>
      </div>
      <div class="card" data-action="faq">
        <b id="c6t">FAQ</b>
        <span id="c6s">약관 · 정책 · 문의</span>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="row">
      <div>
        <div style="font-weight:900" id="installTitle">원클릭 설치 / 실행</div>
        <div class="small" id="installDesc">브라우저에서 “홈 화면에 추가(설치)”가 가능할 때 활성화됩니다.</div>
      </div>
      <div class="row">
        <button class="btn2" id="openPiBrowser">Pi Browser로 열기</button>
        <button class="btn" id="installBtn" disabled>설치</button>
      </div>
    </div>
    <div class="small" style="margin-top:10px">
      URL: <span class="mono" id="urlText"></span>
    </div>
  </div>

  <div class="footer">
    <a class="pill link" id="ytLink" href="https://www.youtube.com/" target="_blank" rel="noopener">YouTube</a>
    <a class="pill link" id="ttLink" href="https://www.tiktok.com/" target="_blank" rel="noopener">TikTok</a>
    <a class="pill link" id="contactLink" href="mailto:ljw2358@gmail.com">Contact</a>
    <span class="pill small" id="status">status: OK</span>
  </div>
</div>

<div class="toast" id="toast"><span id="toastMsg"></span></div>

<script>
  // ===== i18n (한국어 기본) =====
  const I18N = {
    ko: {
      langLabel: "언어",
      c1s:"기본소득 · 리워드",
      c2s:"결제 · 송금",
      c3s:"31.4% APY (demo)",
      c4s:"참여 리워드",
      c5s:"헬프센터",
      c6s:"약관 · 정책 · 문의",
      installTitle:"원클릭 설치 / 실행",
      installDesc:"브라우저에서 “홈 화면에 추가(설치)”가 가능할 때 활성화됩니다.",
      installBtn:"설치",
      openPi:"Pi Browser로 열기",
      status:"status: OK",
      toastPilot:"(데모) 파일럿 화면입니다. 다음 단계에서 실제 기능을 연결합니다.",
      toastInstallReady:"설치가 가능합니다. '설치' 버튼을 누르세요.",
      toastInstallNotReady:"이 환경에서는 설치가 제한될 수 있습니다. (크롬/안드로이드 권장)"
    },
    en: {
      langLabel: "Language",
      c1s:"Basic income rewards",
      c2s:"Pay · Transfer",
      c3s:"31.4% APY (demo)",
      c4s:"Engagement rewards",
      c5s:"Help center",
      c6s:"Terms · Policy · Contact",
      installTitle:"One-click Install / Launch",
      installDesc:"Enabled when 'Add to Home Screen' is available in your browser.",
      installBtn:"Install",
      openPi:"Open in Pi Browser",
      status:"status: OK",
      toastPilot:"(Demo) Pilot screen. Next step: connect real functions.",
      toastInstallReady:"Install is available. Tap 'Install'.",
      toastInstallNotReady:"Install may be limited here. (Chrome/Android recommended)"
    }
  };

  const $ = (id)=>document.getElementById(id);
  const toast = (msg)=>{
    $("toastMsg").textContent = msg;
    $("toast").classList.add("show");
    setTimeout(()=>$("toast").classList.remove("show"), 2200);
  };

  // URL 표시
  $("urlText").textContent = location.href;

  // 언어 적용
  function applyLang(code){
    const t = I18N[code] || I18N.ko;
    document.documentElement.lang = code;

    $("langLabel").textContent = t.langLabel;
    $("c1s").textContent = t.c1s;
    $("c2s").textContent = t.c2s;
    $("c3s").textContent = t.c3s;
    $("c4s").textContent = t.c4s;
    $("c5s").textContent = t.c5s;
    $("c6s").textContent = t.c6s;
    $("installTitle").textContent = t.installTitle;
    $("installDesc").textContent = t.installDesc;
    $("installBtn").textContent = t.installBtn;
    $("openPiBrowser").textContent = t.openPi;
    $("status").textContent = t.status;
  }

  $("langSelect").addEventListener("change", (e)=>applyLang(e.target.value));
  applyLang("ko"); // ✅ 한국어 기본

  // 카드 클릭 (일단 데모 팝업)
  document.addEventListener("click", (e)=>{
    const card = e.target.closest(".card");
    if(!card) return;
    e.preventDefault();
    const lang = $("langSelect").value || "ko";
    toast(I18N[lang].toastPilot);
  });

  // Pi Browser로 열기 (pi:// 스킴은 환경에 따라 제한될 수 있음)
  $("openPiBrowser").addEventListener("click", ()=>{
    // Pi Browser가 설치되어 있으면 열리도록 시도
    // (막히면 웹 URL 그대로 사용)
    const url = location.href;
    // Pi 브라우저 슬러그가 있으면 바꾸세요:
    // const piUrl = "pi://piworldbank";
    // location.href = piUrl;
    window.open(url, "_blank");
  });

  // ===== PWA 설치 =====
  let deferredPrompt = null;

  window.addEventListener("beforeinstallprompt", (e)=>{
    e.preventDefault();
    deferredPrompt = e;
    $("installBtn").disabled = false;
    const lang = $("langSelect").value || "ko";
    toast(I18N[lang].toastInstallReady);
  });

  $("installBtn").addEventListener("click", async ()=>{
    const lang = $("langSelect").value || "ko";
    if(!deferredPrompt){
      toast(I18N[lang].toastInstallNotReady);
      return;
    }
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
    $("installBtn").disabled = true;
  });
</script>
</body>
</html>
